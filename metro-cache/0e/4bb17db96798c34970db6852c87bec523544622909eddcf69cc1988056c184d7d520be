{"dependencies":[{"name":"../../flow_interfaces","data":{"isAsync":false}},{"name":"../../constants/operations","data":{"isAsync":false}},{"name":"../../utils","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getOperation = getOperation;\n  exports.validateParams = validateParams;\n  exports.getURL = getURL;\n  exports.getRequestTimeout = getRequestTimeout;\n  exports.isAuthSupported = isAuthSupported;\n  exports.prepareParams = prepareParams;\n  exports.handleResponse = handleResponse;\n\n  var _flow_interfaces = _$$_REQUIRE(_dependencyMap[0], \"../../flow_interfaces\");\n\n  var _operations = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"../../constants/operations\"));\n\n  var _utils = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"../../utils\"));\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n\n  function getOperation() {\n    return _operations[\"default\"].PNSetStateOperation;\n  }\n\n  function validateParams(modules, incomingParams) {\n    var config = modules.config;\n    var state = incomingParams.state,\n        _incomingParams$chann = incomingParams.channels,\n        channels = _incomingParams$chann === void 0 ? [] : _incomingParams$chann,\n        _incomingParams$chann2 = incomingParams.channelGroups,\n        channelGroups = _incomingParams$chann2 === void 0 ? [] : _incomingParams$chann2;\n    if (!state) return 'Missing State';\n    if (!config.subscribeKey) return 'Missing Subscribe Key';\n    if (channels.length === 0 && channelGroups.length === 0) return 'Please provide a list of channels and/or channel-groups';\n  }\n\n  function getURL(modules, incomingParams) {\n    var config = modules.config;\n    var _incomingParams$chann3 = incomingParams.channels,\n        channels = _incomingParams$chann3 === void 0 ? [] : _incomingParams$chann3;\n    var stringifiedChannels = channels.length > 0 ? channels.join(',') : ',';\n    return \"/v2/presence/sub-key/\".concat(config.subscribeKey, \"/channel/\").concat(_utils[\"default\"].encodeString(stringifiedChannels), \"/uuid/\").concat(config.UUID, \"/data\");\n  }\n\n  function getRequestTimeout(_ref) {\n    var config = _ref.config;\n    return config.getTransactionTimeout();\n  }\n\n  function isAuthSupported() {\n    return true;\n  }\n\n  function prepareParams(modules, incomingParams) {\n    var state = incomingParams.state,\n        _incomingParams$chann4 = incomingParams.channelGroups,\n        channelGroups = _incomingParams$chann4 === void 0 ? [] : _incomingParams$chann4;\n    var params = {};\n    params.state = JSON.stringify(state);\n\n    if (channelGroups.length > 0) {\n      params['channel-group'] = channelGroups.join(',');\n    }\n\n    return params;\n  }\n\n  function handleResponse(modules, serverResponse) {\n    return {\n      state: serverResponse.payload\n    };\n  }\n});","lineCount":79,"map":[[2,0,1,0],[4,0,3,0,"Object"],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,0],[4,24,3,22,"exports"],[4,31,3,0],[4,33,3,31],[4,45,3,0],[4,47,3,45],[5,0,4,2,"value"],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,0,3,45],[6,3,3,0],[7,0,6,0,"exports"],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getOperation"],[7,22,6,0],[7,25,6,23,"getOperation"],[7,37,6,0],[8,0,7,0,"exports"],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"validateParams"],[8,24,7,0],[8,27,7,25,"validateParams"],[8,41,7,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"getURL"],[9,16,8,0],[9,19,8,17,"getURL"],[9,25,8,0],[10,0,9,0,"exports"],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"getRequestTimeout"],[10,27,9,0],[10,30,9,28,"getRequestTimeout"],[10,47,9,0],[11,0,10,0,"exports"],[11,2,10,0,"exports"],[11,9,10,7],[11,10,10,8,"isAuthSupported"],[11,25,10,0],[11,28,10,26,"isAuthSupported"],[11,43,10,0],[12,0,11,0,"exports"],[12,2,11,0,"exports"],[12,9,11,7],[12,10,11,8,"prepareParams"],[12,23,11,0],[12,26,11,24,"prepareParams"],[12,39,11,0],[13,0,12,0,"exports"],[13,2,12,0,"exports"],[13,9,12,7],[13,10,12,8,"handleResponse"],[13,24,12,0],[13,27,12,25,"handleResponse"],[13,41,12,0],[15,0,14,0],[15,6,14,4,"_flow_interfaces"],[15,22,14,20],[15,25,14,23,"require"],[15,36,14,30],[15,80,14,0],[17,0,16,0],[17,6,16,4,"_operations"],[17,17,16,15],[17,20,16,18,"_interopRequireDefault"],[17,42,16,40],[17,43,16,41,"require"],[17,54,16,48],[17,103,16,40],[17,104,16,0],[19,0,18,0],[19,6,18,4,"_utils"],[19,12,18,10],[19,15,18,13,"_interopRequireDefault"],[19,37,18,35],[19,38,18,36,"require"],[19,49,18,43],[19,83,18,35],[19,84,18,0],[21,0,20,0],[21,11,20,9,"_interopRequireDefault"],[21,33,20,0],[21,34,20,32,"obj"],[21,37,20,0],[21,39,20,37],[22,0,20,39],[22,11,20,46,"obj"],[22,14,20,49],[22,18,20,53,"obj"],[22,21,20,56],[22,22,20,57,"__esModule"],[22,32,20,46],[22,35,20,70,"obj"],[22,38,20,46],[22,41,20,76],[23,0,20,78],[23,17,20,89,"obj"],[24,0,20,76],[24,5,20,39],[25,0,20,97],[27,0,22,0],[27,11,22,9,"getOperation"],[27,23,22,0],[27,26,22,24],[28,0,23,2],[28,11,23,9,"_operations"],[28,22,23,20],[28,23,23,21],[28,32,23,20],[28,33,23,9],[28,34,23,32,"PNSetStateOperation"],[28,53,23,2],[29,0,24,1],[31,0,26,0],[31,11,26,9,"validateParams"],[31,25,26,0],[31,26,26,24,"modules"],[31,33,26,0],[31,35,26,33,"incomingParams"],[31,49,26,0],[31,51,26,49],[32,0,27,2],[32,8,27,6,"config"],[32,14,27,12],[32,17,27,15,"modules"],[32,24,27,22],[32,25,27,23,"config"],[32,31,27,2],[33,0,28,2],[33,8,28,6,"state"],[33,13,28,11],[33,16,28,14,"incomingParams"],[33,30,28,28],[33,31,28,29,"state"],[33,36,28,2],[34,0,28,2],[34,8,29,6,"_incomingParams$chann"],[34,29,29,27],[34,32,29,30,"incomingParams"],[34,46,29,44],[34,47,29,45,"channels"],[34,55,28,2],[35,0,28,2],[35,8,30,6,"channels"],[35,16,30,14],[35,19,30,17,"_incomingParams$chann"],[35,40,30,38],[35,45,30,43],[35,50,30,48],[35,51,30,17],[35,54,30,52],[35,56,30,17],[35,59,30,57,"_incomingParams$chann"],[35,80,28,2],[36,0,28,2],[36,8,31,6,"_incomingParams$chann2"],[36,30,31,28],[36,33,31,31,"incomingParams"],[36,47,31,45],[36,48,31,46,"channelGroups"],[36,61,28,2],[37,0,28,2],[37,8,32,6,"channelGroups"],[37,21,32,19],[37,24,32,22,"_incomingParams$chann2"],[37,46,32,44],[37,51,32,49],[37,56,32,54],[37,57,32,22],[37,60,32,58],[37,62,32,22],[37,65,32,63,"_incomingParams$chann2"],[37,87,28,2],[38,0,33,2],[38,8,33,6],[38,9,33,7,"state"],[38,14,33,2],[38,16,33,14],[38,23,33,21],[38,38,33,14],[39,0,34,2],[39,8,34,6],[39,9,34,7,"config"],[39,15,34,13],[39,16,34,14,"subscribeKey"],[39,28,34,2],[39,30,34,28],[39,37,34,35],[39,60,34,28],[40,0,35,2],[40,8,35,6,"channels"],[40,16,35,14],[40,17,35,15,"length"],[40,23,35,6],[40,28,35,26],[40,29,35,6],[40,33,35,31,"channelGroups"],[40,46,35,44],[40,47,35,45,"length"],[40,53,35,31],[40,58,35,56],[40,59,35,2],[40,61,35,59],[40,68,35,66],[40,125,35,59],[41,0,36,1],[43,0,38,0],[43,11,38,9,"getURL"],[43,17,38,0],[43,18,38,16,"modules"],[43,25,38,0],[43,27,38,25,"incomingParams"],[43,41,38,0],[43,43,38,41],[44,0,39,2],[44,8,39,6,"config"],[44,14,39,12],[44,17,39,15,"modules"],[44,24,39,22],[44,25,39,23,"config"],[44,31,39,2],[45,0,40,2],[45,8,40,6,"_incomingParams$chann3"],[45,30,40,28],[45,33,40,31,"incomingParams"],[45,47,40,45],[45,48,40,46,"channels"],[45,56,40,2],[46,0,40,2],[46,8,41,6,"channels"],[46,16,41,14],[46,19,41,17,"_incomingParams$chann3"],[46,41,41,39],[46,46,41,44],[46,51,41,49],[46,52,41,17],[46,55,41,53],[46,57,41,17],[46,60,41,58,"_incomingParams$chann3"],[46,82,40,2],[47,0,42,2],[47,8,42,6,"stringifiedChannels"],[47,27,42,25],[47,30,42,28,"channels"],[47,38,42,36],[47,39,42,37,"length"],[47,45,42,28],[47,48,42,46],[47,49,42,28],[47,52,42,50,"channels"],[47,60,42,58],[47,61,42,59,"join"],[47,65,42,50],[47,66,42,64],[47,69,42,50],[47,70,42,28],[47,73,42,71],[47,76,42,2],[48,0,43,2],[48,11,43,9],[48,35,43,33,"concat"],[48,41,43,9],[48,42,43,40,"config"],[48,48,43,46],[48,49,43,47,"subscribeKey"],[48,61,43,9],[48,63,43,61],[48,74,43,9],[48,76,43,74,"concat"],[48,82,43,9],[48,83,43,81,"_utils"],[48,89,43,87],[48,90,43,88],[48,99,43,87],[48,100,43,81],[48,101,43,99,"encodeString"],[48,113,43,81],[48,114,43,112,"stringifiedChannels"],[48,133,43,81],[48,134,43,9],[48,136,43,134],[48,144,43,9],[48,146,43,144,"concat"],[48,152,43,9],[48,153,43,151,"config"],[48,159,43,157],[48,160,43,158,"UUID"],[48,164,43,9],[48,166,43,164],[48,173,43,9],[48,174,43,2],[49,0,44,1],[51,0,46,0],[51,11,46,9,"getRequestTimeout"],[51,28,46,0],[51,29,46,27,"_ref"],[51,33,46,0],[51,35,46,33],[52,0,47,2],[52,8,47,6,"config"],[52,14,47,12],[52,17,47,15,"_ref"],[52,21,47,19],[52,22,47,20,"config"],[52,28,47,2],[53,0,48,2],[53,11,48,9,"config"],[53,17,48,15],[53,18,48,16,"getTransactionTimeout"],[53,39,48,9],[53,41,48,2],[54,0,49,1],[56,0,51,0],[56,11,51,9,"isAuthSupported"],[56,26,51,0],[56,29,51,27],[57,0,52,2],[57,11,52,9],[57,15,52,2],[58,0,53,1],[60,0,55,0],[60,11,55,9,"prepareParams"],[60,24,55,0],[60,25,55,23,"modules"],[60,32,55,0],[60,34,55,32,"incomingParams"],[60,48,55,0],[60,50,55,48],[61,0,56,2],[61,8,56,6,"state"],[61,13,56,11],[61,16,56,14,"incomingParams"],[61,30,56,28],[61,31,56,29,"state"],[61,36,56,2],[62,0,56,2],[62,8,57,6,"_incomingParams$chann4"],[62,30,57,28],[62,33,57,31,"incomingParams"],[62,47,57,45],[62,48,57,46,"channelGroups"],[62,61,56,2],[63,0,56,2],[63,8,58,6,"channelGroups"],[63,21,58,19],[63,24,58,22,"_incomingParams$chann4"],[63,46,58,44],[63,51,58,49],[63,56,58,54],[63,57,58,22],[63,60,58,58],[63,62,58,22],[63,65,58,63,"_incomingParams$chann4"],[63,87,56,2],[64,0,59,2],[64,8,59,6,"params"],[64,14,59,12],[64,17,59,15],[64,19,59,2],[65,0,60,2,"params"],[65,4,60,2,"params"],[65,10,60,8],[65,11,60,9,"state"],[65,16,60,2],[65,19,60,17,"JSON"],[65,23,60,21],[65,24,60,22,"stringify"],[65,33,60,17],[65,34,60,32,"state"],[65,39,60,17],[65,40,60,2],[67,0,62,2],[67,8,62,6,"channelGroups"],[67,21,62,19],[67,22,62,20,"length"],[67,28,62,6],[67,31,62,29],[67,32,62,2],[67,34,62,32],[68,0,63,4,"params"],[68,6,63,4,"params"],[68,12,63,10],[68,13,63,11],[68,28,63,10],[68,29,63,4],[68,32,63,30,"channelGroups"],[68,45,63,43],[68,46,63,44,"join"],[68,50,63,30],[68,51,63,49],[68,54,63,30],[68,55,63,4],[69,0,64,3],[71,0,66,2],[71,11,66,9,"params"],[71,17,66,2],[72,0,67,1],[74,0,69,0],[74,11,69,9,"handleResponse"],[74,25,69,0],[74,26,69,24,"modules"],[74,33,69,0],[74,35,69,33,"serverResponse"],[74,49,69,0],[74,51,69,49],[75,0,70,2],[75,11,70,9],[76,0,71,4,"state"],[76,6,71,4,"state"],[76,11,71,9],[76,13,71,11,"serverResponse"],[76,27,71,25],[76,28,71,26,"payload"],[77,0,70,9],[77,5,70,2],[78,0,73,1]],"functionMap":{"names":["<global>","_interopRequireDefault","getOperation","validateParams","getURL","getRequestTimeout","isAuthSupported","prepareParams","handleResponse"],"mappings":"AAA;ACmB,iGD;AEE;CFE;AGE;CHU;AIE;CJM;AKE;CLG;AME;CNE;AOE;CPY;AQE;CRI"}},"type":"js/module"}]}
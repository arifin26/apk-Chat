{"dependencies":[{"name":"../../flow_interfaces","data":{"isAsync":false}},{"name":"../../constants/operations","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getOperation = getOperation;\n  exports.validateParams = validateParams;\n  exports.getURL = getURL;\n  exports.patchURL = patchURL;\n  exports.usePatch = usePatch;\n  exports.getRequestTimeout = getRequestTimeout;\n  exports.isAuthSupported = isAuthSupported;\n  exports.getAuthToken = getAuthToken;\n  exports.prepareParams = prepareParams;\n  exports.patchPayload = patchPayload;\n  exports.handleResponse = handleResponse;\n\n  var _flow_interfaces = _$$_REQUIRE(_dependencyMap[0], \"../../flow_interfaces\");\n\n  var _operations = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"../../constants/operations\"));\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n\n  function prepareMessagePayload(modules, incomingParams) {\n    var users = incomingParams.users;\n    var payload = {};\n\n    if (users && users.length > 0) {\n      payload.remove = [];\n      users.forEach(function (removeMemberId) {\n        payload.remove.push({\n          id: removeMemberId\n        });\n      });\n    }\n\n    return payload;\n  }\n\n  function getOperation() {\n    return _operations[\"default\"].PNUpdateMembersOperation;\n  }\n\n  function validateParams(modules, incomingParams) {\n    var spaceId = incomingParams.spaceId,\n        users = incomingParams.users;\n    if (!spaceId) return 'Missing spaceId';\n    if (!users) return 'Missing users';\n  }\n\n  function getURL(modules, incomingParams) {\n    var config = modules.config;\n    return \"/v1/objects/\".concat(config.subscribeKey, \"/spaces/\").concat(incomingParams.spaceId, \"/users\");\n  }\n\n  function patchURL(modules, incomingParams) {\n    var config = modules.config;\n    return \"/v1/objects/\".concat(config.subscribeKey, \"/spaces/\").concat(incomingParams.spaceId, \"/users\");\n  }\n\n  function usePatch() {\n    return true;\n  }\n\n  function getRequestTimeout(_ref) {\n    var config = _ref.config;\n    return config.getTransactionTimeout();\n  }\n\n  function isAuthSupported() {\n    return true;\n  }\n\n  function getAuthToken(modules, incomingParams) {\n    var token = modules.tokenManager.getToken('space', incomingParams.spaceId) || modules.tokenManager.getToken('space');\n    return token;\n  }\n\n  function prepareParams(modules, incomingParams) {\n    var include = incomingParams.include,\n        limit = incomingParams.limit,\n        page = incomingParams.page;\n    var params = {};\n\n    if (limit) {\n      params.limit = limit;\n    }\n\n    if (include) {\n      var includes = [];\n\n      if (include.totalCount) {\n        params.count = true;\n      }\n\n      if (include.customFields) {\n        includes.push('custom');\n      }\n\n      if (include.spaceFields) {\n        includes.push('space');\n      }\n\n      if (include.customSpaceFields) {\n        includes.push('space.custom');\n      }\n\n      var includesString = includes.join(',');\n\n      if (includesString.length > 0) {\n        params.include = includesString;\n      }\n    }\n\n    if (page) {\n      if (page.next) {\n        params.start = page.next;\n      }\n\n      if (page.prev) {\n        params.end = page.prev;\n      }\n    }\n\n    return params;\n  }\n\n  function patchPayload(modules, incomingParams) {\n    return prepareMessagePayload(modules, incomingParams);\n  }\n\n  function handleResponse(modules, membersResponse) {\n    return membersResponse;\n  }\n});","lineCount":140,"map":[[2,0,1,0],[4,0,3,0,"Object"],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,0],[4,24,3,22,"exports"],[4,31,3,0],[4,33,3,31],[4,45,3,0],[4,47,3,45],[5,0,4,2,"value"],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,0,3,45],[6,3,3,0],[7,0,6,0,"exports"],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getOperation"],[7,22,6,0],[7,25,6,23,"getOperation"],[7,37,6,0],[8,0,7,0,"exports"],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"validateParams"],[8,24,7,0],[8,27,7,25,"validateParams"],[8,41,7,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"getURL"],[9,16,8,0],[9,19,8,17,"getURL"],[9,25,8,0],[10,0,9,0,"exports"],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"patchURL"],[10,18,9,0],[10,21,9,19,"patchURL"],[10,29,9,0],[11,0,10,0,"exports"],[11,2,10,0,"exports"],[11,9,10,7],[11,10,10,8,"usePatch"],[11,18,10,0],[11,21,10,19,"usePatch"],[11,29,10,0],[12,0,11,0,"exports"],[12,2,11,0,"exports"],[12,9,11,7],[12,10,11,8,"getRequestTimeout"],[12,27,11,0],[12,30,11,28,"getRequestTimeout"],[12,47,11,0],[13,0,12,0,"exports"],[13,2,12,0,"exports"],[13,9,12,7],[13,10,12,8,"isAuthSupported"],[13,25,12,0],[13,28,12,26,"isAuthSupported"],[13,43,12,0],[14,0,13,0,"exports"],[14,2,13,0,"exports"],[14,9,13,7],[14,10,13,8,"getAuthToken"],[14,22,13,0],[14,25,13,23,"getAuthToken"],[14,37,13,0],[15,0,14,0,"exports"],[15,2,14,0,"exports"],[15,9,14,7],[15,10,14,8,"prepareParams"],[15,23,14,0],[15,26,14,24,"prepareParams"],[15,39,14,0],[16,0,15,0,"exports"],[16,2,15,0,"exports"],[16,9,15,7],[16,10,15,8,"patchPayload"],[16,22,15,0],[16,25,15,23,"patchPayload"],[16,37,15,0],[17,0,16,0,"exports"],[17,2,16,0,"exports"],[17,9,16,7],[17,10,16,8,"handleResponse"],[17,24,16,0],[17,27,16,25,"handleResponse"],[17,41,16,0],[19,0,18,0],[19,6,18,4,"_flow_interfaces"],[19,22,18,20],[19,25,18,23,"require"],[19,36,18,30],[19,80,18,0],[21,0,20,0],[21,6,20,4,"_operations"],[21,17,20,15],[21,20,20,18,"_interopRequireDefault"],[21,42,20,40],[21,43,20,41,"require"],[21,54,20,48],[21,103,20,40],[21,104,20,0],[23,0,22,0],[23,11,22,9,"_interopRequireDefault"],[23,33,22,0],[23,34,22,32,"obj"],[23,37,22,0],[23,39,22,37],[24,0,22,39],[24,11,22,46,"obj"],[24,14,22,49],[24,18,22,53,"obj"],[24,21,22,56],[24,22,22,57,"__esModule"],[24,32,22,46],[24,35,22,70,"obj"],[24,38,22,46],[24,41,22,76],[25,0,22,78],[25,17,22,89,"obj"],[26,0,22,76],[26,5,22,39],[27,0,22,97],[29,0,24,0],[29,11,24,9,"prepareMessagePayload"],[29,32,24,0],[29,33,24,31,"modules"],[29,40,24,0],[29,42,24,40,"incomingParams"],[29,56,24,0],[29,58,24,56],[30,0,25,2],[30,8,25,6,"users"],[30,13,25,11],[30,16,25,14,"incomingParams"],[30,30,25,28],[30,31,25,29,"users"],[30,36,25,2],[31,0,26,2],[31,8,26,6,"payload"],[31,15,26,13],[31,18,26,16],[31,20,26,2],[33,0,28,2],[33,8,28,6,"users"],[33,13,28,11],[33,17,28,15,"users"],[33,22,28,20],[33,23,28,21,"length"],[33,29,28,15],[33,32,28,30],[33,33,28,2],[33,35,28,33],[34,0,29,4,"payload"],[34,6,29,4,"payload"],[34,13,29,11],[34,14,29,12,"remove"],[34,20,29,4],[34,23,29,21],[34,25,29,4],[35,0,30,4,"users"],[35,6,30,4,"users"],[35,11,30,9],[35,12,30,10,"forEach"],[35,19,30,4],[35,20,30,18],[35,30,30,28,"removeMemberId"],[35,44,30,18],[35,46,30,44],[36,0,31,6,"payload"],[36,8,31,6,"payload"],[36,15,31,13],[36,16,31,14,"remove"],[36,22,31,6],[36,23,31,21,"push"],[36,27,31,6],[36,28,31,26],[37,0,32,8,"id"],[37,10,32,8,"id"],[37,12,32,10],[37,14,32,12,"removeMemberId"],[38,0,31,26],[38,9,31,6],[39,0,34,5],[39,7,30,4],[40,0,35,3],[42,0,37,2],[42,11,37,9,"payload"],[42,18,37,2],[43,0,38,1],[45,0,40,0],[45,11,40,9,"getOperation"],[45,23,40,0],[45,26,40,24],[46,0,41,2],[46,11,41,9,"_operations"],[46,22,41,20],[46,23,41,21],[46,32,41,20],[46,33,41,9],[46,34,41,32,"PNUpdateMembersOperation"],[46,58,41,2],[47,0,42,1],[49,0,44,0],[49,11,44,9,"validateParams"],[49,25,44,0],[49,26,44,24,"modules"],[49,33,44,0],[49,35,44,33,"incomingParams"],[49,49,44,0],[49,51,44,49],[50,0,45,2],[50,8,45,6,"spaceId"],[50,15,45,13],[50,18,45,16,"incomingParams"],[50,32,45,30],[50,33,45,31,"spaceId"],[50,40,45,2],[51,0,45,2],[51,8,46,6,"users"],[51,13,46,11],[51,16,46,14,"incomingParams"],[51,30,46,28],[51,31,46,29,"users"],[51,36,45,2],[52,0,47,2],[52,8,47,6],[52,9,47,7,"spaceId"],[52,16,47,2],[52,18,47,16],[52,25,47,23],[52,42,47,16],[53,0,48,2],[53,8,48,6],[53,9,48,7,"users"],[53,14,48,2],[53,16,48,14],[53,23,48,21],[53,38,48,14],[54,0,49,1],[56,0,51,0],[56,11,51,9,"getURL"],[56,17,51,0],[56,18,51,16,"modules"],[56,25,51,0],[56,27,51,25,"incomingParams"],[56,41,51,0],[56,43,51,41],[57,0,52,2],[57,8,52,6,"config"],[57,14,52,12],[57,17,52,15,"modules"],[57,24,52,22],[57,25,52,23,"config"],[57,31,52,2],[58,0,53,2],[58,11,53,9],[58,26,53,24,"concat"],[58,32,53,9],[58,33,53,31,"config"],[58,39,53,37],[58,40,53,38,"subscribeKey"],[58,52,53,9],[58,54,53,52],[58,64,53,9],[58,66,53,64,"concat"],[58,72,53,9],[58,73,53,71,"incomingParams"],[58,87,53,85],[58,88,53,86,"spaceId"],[58,95,53,9],[58,97,53,95],[58,105,53,9],[58,106,53,2],[59,0,54,1],[61,0,56,0],[61,11,56,9,"patchURL"],[61,19,56,0],[61,20,56,18,"modules"],[61,27,56,0],[61,29,56,27,"incomingParams"],[61,43,56,0],[61,45,56,43],[62,0,57,2],[62,8,57,6,"config"],[62,14,57,12],[62,17,57,15,"modules"],[62,24,57,22],[62,25,57,23,"config"],[62,31,57,2],[63,0,58,2],[63,11,58,9],[63,26,58,24,"concat"],[63,32,58,9],[63,33,58,31,"config"],[63,39,58,37],[63,40,58,38,"subscribeKey"],[63,52,58,9],[63,54,58,52],[63,64,58,9],[63,66,58,64,"concat"],[63,72,58,9],[63,73,58,71,"incomingParams"],[63,87,58,85],[63,88,58,86,"spaceId"],[63,95,58,9],[63,97,58,95],[63,105,58,9],[63,106,58,2],[64,0,59,1],[66,0,61,0],[66,11,61,9,"usePatch"],[66,19,61,0],[66,22,61,20],[67,0,62,2],[67,11,62,9],[67,15,62,2],[68,0,63,1],[70,0,65,0],[70,11,65,9,"getRequestTimeout"],[70,28,65,0],[70,29,65,27,"_ref"],[70,33,65,0],[70,35,65,33],[71,0,66,2],[71,8,66,6,"config"],[71,14,66,12],[71,17,66,15,"_ref"],[71,21,66,19],[71,22,66,20,"config"],[71,28,66,2],[72,0,67,2],[72,11,67,9,"config"],[72,17,67,15],[72,18,67,16,"getTransactionTimeout"],[72,39,67,9],[72,41,67,2],[73,0,68,1],[75,0,70,0],[75,11,70,9,"isAuthSupported"],[75,26,70,0],[75,29,70,27],[76,0,71,2],[76,11,71,9],[76,15,71,2],[77,0,72,1],[79,0,74,0],[79,11,74,9,"getAuthToken"],[79,23,74,0],[79,24,74,22,"modules"],[79,31,74,0],[79,33,74,31,"incomingParams"],[79,47,74,0],[79,49,74,47],[80,0,75,2],[80,8,75,6,"token"],[80,13,75,11],[80,16,75,14,"modules"],[80,23,75,21],[80,24,75,22,"tokenManager"],[80,36,75,14],[80,37,75,35,"getToken"],[80,45,75,14],[80,46,75,44],[80,53,75,14],[80,55,75,53,"incomingParams"],[80,69,75,67],[80,70,75,68,"spaceId"],[80,77,75,14],[80,82,75,80,"modules"],[80,89,75,87],[80,90,75,88,"tokenManager"],[80,102,75,80],[80,103,75,101,"getToken"],[80,111,75,80],[80,112,75,110],[80,119,75,80],[80,120,75,2],[81,0,76,2],[81,11,76,9,"token"],[81,16,76,2],[82,0,77,1],[84,0,79,0],[84,11,79,9,"prepareParams"],[84,24,79,0],[84,25,79,23,"modules"],[84,32,79,0],[84,34,79,32,"incomingParams"],[84,48,79,0],[84,50,79,48],[85,0,80,2],[85,8,80,6,"include"],[85,15,80,13],[85,18,80,16,"incomingParams"],[85,32,80,30],[85,33,80,31,"include"],[85,40,80,2],[86,0,80,2],[86,8,81,6,"limit"],[86,13,81,11],[86,16,81,14,"incomingParams"],[86,30,81,28],[86,31,81,29,"limit"],[86,36,80,2],[87,0,80,2],[87,8,82,6,"page"],[87,12,82,10],[87,15,82,13,"incomingParams"],[87,29,82,27],[87,30,82,28,"page"],[87,34,80,2],[88,0,83,2],[88,8,83,6,"params"],[88,14,83,12],[88,17,83,15],[88,19,83,2],[90,0,85,2],[90,8,85,6,"limit"],[90,13,85,2],[90,15,85,13],[91,0,86,4,"params"],[91,6,86,4,"params"],[91,12,86,10],[91,13,86,11,"limit"],[91,18,86,4],[91,21,86,19,"limit"],[91,26,86,4],[92,0,87,3],[94,0,89,2],[94,8,89,6,"include"],[94,15,89,2],[94,17,89,15],[95,0,90,4],[95,10,90,8,"includes"],[95,18,90,16],[95,21,90,19],[95,23,90,4],[97,0,92,4],[97,10,92,8,"include"],[97,17,92,15],[97,18,92,16,"totalCount"],[97,28,92,4],[97,30,92,28],[98,0,93,6,"params"],[98,8,93,6,"params"],[98,14,93,12],[98,15,93,13,"count"],[98,20,93,6],[98,23,93,21],[98,27,93,6],[99,0,94,5],[101,0,96,4],[101,10,96,8,"include"],[101,17,96,15],[101,18,96,16,"customFields"],[101,30,96,4],[101,32,96,30],[102,0,97,6,"includes"],[102,8,97,6,"includes"],[102,16,97,14],[102,17,97,15,"push"],[102,21,97,6],[102,22,97,20],[102,30,97,6],[103,0,98,5],[105,0,100,4],[105,10,100,8,"include"],[105,17,100,15],[105,18,100,16,"spaceFields"],[105,29,100,4],[105,31,100,29],[106,0,101,6,"includes"],[106,8,101,6,"includes"],[106,16,101,14],[106,17,101,15,"push"],[106,21,101,6],[106,22,101,20],[106,29,101,6],[107,0,102,5],[109,0,104,4],[109,10,104,8,"include"],[109,17,104,15],[109,18,104,16,"customSpaceFields"],[109,35,104,4],[109,37,104,35],[110,0,105,6,"includes"],[110,8,105,6,"includes"],[110,16,105,14],[110,17,105,15,"push"],[110,21,105,6],[110,22,105,20],[110,36,105,6],[111,0,106,5],[113,0,108,4],[113,10,108,8,"includesString"],[113,24,108,22],[113,27,108,25,"includes"],[113,35,108,33],[113,36,108,34,"join"],[113,40,108,25],[113,41,108,39],[113,44,108,25],[113,45,108,4],[115,0,110,4],[115,10,110,8,"includesString"],[115,24,110,22],[115,25,110,23,"length"],[115,31,110,8],[115,34,110,32],[115,35,110,4],[115,37,110,35],[116,0,111,6,"params"],[116,8,111,6,"params"],[116,14,111,12],[116,15,111,13,"include"],[116,22,111,6],[116,25,111,23,"includesString"],[116,39,111,6],[117,0,112,5],[118,0,113,3],[120,0,115,2],[120,8,115,6,"page"],[120,12,115,2],[120,14,115,12],[121,0,116,4],[121,10,116,8,"page"],[121,14,116,12],[121,15,116,13,"next"],[121,19,116,4],[121,21,116,19],[122,0,117,6,"params"],[122,8,117,6,"params"],[122,14,117,12],[122,15,117,13,"start"],[122,20,117,6],[122,23,117,21,"page"],[122,27,117,25],[122,28,117,26,"next"],[122,32,117,6],[123,0,118,5],[125,0,120,4],[125,10,120,8,"page"],[125,14,120,12],[125,15,120,13,"prev"],[125,19,120,4],[125,21,120,19],[126,0,121,6,"params"],[126,8,121,6,"params"],[126,14,121,12],[126,15,121,13,"end"],[126,18,121,6],[126,21,121,19,"page"],[126,25,121,23],[126,26,121,24,"prev"],[126,30,121,6],[127,0,122,5],[128,0,123,3],[130,0,125,2],[130,11,125,9,"params"],[130,17,125,2],[131,0,126,1],[133,0,128,0],[133,11,128,9,"patchPayload"],[133,23,128,0],[133,24,128,22,"modules"],[133,31,128,0],[133,33,128,31,"incomingParams"],[133,47,128,0],[133,49,128,47],[134,0,129,2],[134,11,129,9,"prepareMessagePayload"],[134,32,129,30],[134,33,129,31,"modules"],[134,40,129,30],[134,42,129,40,"incomingParams"],[134,56,129,30],[134,57,129,2],[135,0,130,1],[137,0,132,0],[137,11,132,9,"handleResponse"],[137,25,132,0],[137,26,132,24,"modules"],[137,33,132,0],[137,35,132,33,"membersResponse"],[137,50,132,0],[137,52,132,50],[138,0,133,2],[138,11,133,9,"membersResponse"],[138,26,133,2],[139,0,134,1]],"functionMap":{"names":["<global>","_interopRequireDefault","prepareMessagePayload","users.forEach$argument_0","getOperation","validateParams","getURL","patchURL","usePatch","getRequestTimeout","isAuthSupported","getAuthToken","prepareParams","patchPayload","handleResponse"],"mappings":"AAA;ACqB,iGD;AEE;kBCM;KDI;CFI;AIE;CJE;AKE;CLK;AME;CNG;AOE;CPG;AQE;CRE;ASE;CTG;AUE;CVE;AWE;CXG;AYE;CZ+C;AaE;CbE;AcE;CdE"}},"type":"js/module"}]}
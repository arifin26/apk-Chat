{"dependencies":[{"name":"../../flow_interfaces","data":{"isAsync":false}},{"name":"../../constants/operations","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getOperation = getOperation;\n  exports.validateParams = validateParams;\n  exports.getURL = getURL;\n  exports.patchURL = patchURL;\n  exports.usePatch = usePatch;\n  exports.getRequestTimeout = getRequestTimeout;\n  exports.isAuthSupported = isAuthSupported;\n  exports.getAuthToken = getAuthToken;\n  exports.prepareParams = prepareParams;\n  exports.patchPayload = patchPayload;\n  exports.handleResponse = handleResponse;\n\n  var _flow_interfaces = _$$_REQUIRE(_dependencyMap[0], \"../../flow_interfaces\");\n\n  var _operations = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"../../constants/operations\"));\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n\n  function prepareMessagePayload(modules, incomingParams) {\n    var spaces = incomingParams.spaces;\n    var payload = {};\n\n    if (spaces && spaces.length > 0) {\n      payload.add = [];\n      spaces.forEach(function (addMembership) {\n        var currentAdd = {\n          id: addMembership.id\n        };\n\n        if (addMembership.custom) {\n          currentAdd.custom = addMembership.custom;\n        }\n\n        payload.add.push(currentAdd);\n      });\n    }\n\n    return payload;\n  }\n\n  function getOperation() {\n    return _operations[\"default\"].PNUpdateMembershipsOperation;\n  }\n\n  function validateParams(modules, incomingParams) {\n    var userId = incomingParams.userId,\n        spaces = incomingParams.spaces;\n    if (!userId) return 'Missing userId';\n    if (!spaces) return 'Missing spaces';\n  }\n\n  function getURL(modules, incomingParams) {\n    var config = modules.config;\n    return \"/v1/objects/\".concat(config.subscribeKey, \"/users/\").concat(incomingParams.userId, \"/spaces\");\n  }\n\n  function patchURL(modules, incomingParams) {\n    var config = modules.config;\n    return \"/v1/objects/\".concat(config.subscribeKey, \"/users/\").concat(incomingParams.userId, \"/spaces\");\n  }\n\n  function usePatch() {\n    return true;\n  }\n\n  function getRequestTimeout(_ref) {\n    var config = _ref.config;\n    return config.getTransactionTimeout();\n  }\n\n  function isAuthSupported() {\n    return true;\n  }\n\n  function getAuthToken(modules, incomingParams) {\n    var token = modules.tokenManager.getToken('user', incomingParams.userId) || modules.tokenManager.getToken('user');\n    return token;\n  }\n\n  function prepareParams(modules, incomingParams) {\n    var include = incomingParams.include,\n        limit = incomingParams.limit,\n        page = incomingParams.page;\n    var params = {};\n\n    if (limit) {\n      params.limit = limit;\n    }\n\n    if (include) {\n      var includes = [];\n\n      if (include.totalCount) {\n        params.count = true;\n      }\n\n      if (include.customFields) {\n        includes.push('custom');\n      }\n\n      if (include.spaceFields) {\n        includes.push('space');\n      }\n\n      if (include.customSpaceFields) {\n        includes.push('space.custom');\n      }\n\n      var includesString = includes.join(',');\n\n      if (includesString.length > 0) {\n        params.include = includesString;\n      }\n    }\n\n    if (page) {\n      if (page.next) {\n        params.start = page.next;\n      }\n\n      if (page.prev) {\n        params.end = page.prev;\n      }\n    }\n\n    return params;\n  }\n\n  function patchPayload(modules, incomingParams) {\n    return prepareMessagePayload(modules, incomingParams);\n  }\n\n  function handleResponse(modules, membershipsResponse) {\n    return membershipsResponse;\n  }\n});","lineCount":146,"map":[[2,0,1,0],[4,0,3,0,"Object"],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,0],[4,24,3,22,"exports"],[4,31,3,0],[4,33,3,31],[4,45,3,0],[4,47,3,45],[5,0,4,2,"value"],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,0,3,45],[6,3,3,0],[7,0,6,0,"exports"],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getOperation"],[7,22,6,0],[7,25,6,23,"getOperation"],[7,37,6,0],[8,0,7,0,"exports"],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"validateParams"],[8,24,7,0],[8,27,7,25,"validateParams"],[8,41,7,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"getURL"],[9,16,8,0],[9,19,8,17,"getURL"],[9,25,8,0],[10,0,9,0,"exports"],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"patchURL"],[10,18,9,0],[10,21,9,19,"patchURL"],[10,29,9,0],[11,0,10,0,"exports"],[11,2,10,0,"exports"],[11,9,10,7],[11,10,10,8,"usePatch"],[11,18,10,0],[11,21,10,19,"usePatch"],[11,29,10,0],[12,0,11,0,"exports"],[12,2,11,0,"exports"],[12,9,11,7],[12,10,11,8,"getRequestTimeout"],[12,27,11,0],[12,30,11,28,"getRequestTimeout"],[12,47,11,0],[13,0,12,0,"exports"],[13,2,12,0,"exports"],[13,9,12,7],[13,10,12,8,"isAuthSupported"],[13,25,12,0],[13,28,12,26,"isAuthSupported"],[13,43,12,0],[14,0,13,0,"exports"],[14,2,13,0,"exports"],[14,9,13,7],[14,10,13,8,"getAuthToken"],[14,22,13,0],[14,25,13,23,"getAuthToken"],[14,37,13,0],[15,0,14,0,"exports"],[15,2,14,0,"exports"],[15,9,14,7],[15,10,14,8,"prepareParams"],[15,23,14,0],[15,26,14,24,"prepareParams"],[15,39,14,0],[16,0,15,0,"exports"],[16,2,15,0,"exports"],[16,9,15,7],[16,10,15,8,"patchPayload"],[16,22,15,0],[16,25,15,23,"patchPayload"],[16,37,15,0],[17,0,16,0,"exports"],[17,2,16,0,"exports"],[17,9,16,7],[17,10,16,8,"handleResponse"],[17,24,16,0],[17,27,16,25,"handleResponse"],[17,41,16,0],[19,0,18,0],[19,6,18,4,"_flow_interfaces"],[19,22,18,20],[19,25,18,23,"require"],[19,36,18,30],[19,80,18,0],[21,0,20,0],[21,6,20,4,"_operations"],[21,17,20,15],[21,20,20,18,"_interopRequireDefault"],[21,42,20,40],[21,43,20,41,"require"],[21,54,20,48],[21,103,20,40],[21,104,20,0],[23,0,22,0],[23,11,22,9,"_interopRequireDefault"],[23,33,22,0],[23,34,22,32,"obj"],[23,37,22,0],[23,39,22,37],[24,0,22,39],[24,11,22,46,"obj"],[24,14,22,49],[24,18,22,53,"obj"],[24,21,22,56],[24,22,22,57,"__esModule"],[24,32,22,46],[24,35,22,70,"obj"],[24,38,22,46],[24,41,22,76],[25,0,22,78],[25,17,22,89,"obj"],[26,0,22,76],[26,5,22,39],[27,0,22,97],[29,0,24,0],[29,11,24,9,"prepareMessagePayload"],[29,32,24,0],[29,33,24,31,"modules"],[29,40,24,0],[29,42,24,40,"incomingParams"],[29,56,24,0],[29,58,24,56],[30,0,25,2],[30,8,25,6,"spaces"],[30,14,25,12],[30,17,25,15,"incomingParams"],[30,31,25,29],[30,32,25,30,"spaces"],[30,38,25,2],[31,0,26,2],[31,8,26,6,"payload"],[31,15,26,13],[31,18,26,16],[31,20,26,2],[33,0,28,2],[33,8,28,6,"spaces"],[33,14,28,12],[33,18,28,16,"spaces"],[33,24,28,22],[33,25,28,23,"length"],[33,31,28,16],[33,34,28,32],[33,35,28,2],[33,37,28,35],[34,0,29,4,"payload"],[34,6,29,4,"payload"],[34,13,29,11],[34,14,29,12,"add"],[34,17,29,4],[34,20,29,18],[34,22,29,4],[35,0,30,4,"spaces"],[35,6,30,4,"spaces"],[35,12,30,10],[35,13,30,11,"forEach"],[35,20,30,4],[35,21,30,19],[35,31,30,29,"addMembership"],[35,44,30,19],[35,46,30,44],[36,0,31,6],[36,12,31,10,"currentAdd"],[36,22,31,20],[36,25,31,23],[37,0,32,8,"id"],[37,10,32,8,"id"],[37,12,32,10],[37,14,32,12,"addMembership"],[37,27,32,25],[37,28,32,26,"id"],[38,0,31,23],[38,9,31,6],[40,0,35,6],[40,12,35,10,"addMembership"],[40,25,35,23],[40,26,35,24,"custom"],[40,32,35,6],[40,34,35,32],[41,0,36,8,"currentAdd"],[41,10,36,8,"currentAdd"],[41,20,36,18],[41,21,36,19,"custom"],[41,27,36,8],[41,30,36,28,"addMembership"],[41,43,36,41],[41,44,36,42,"custom"],[41,50,36,8],[42,0,37,7],[44,0,39,6,"payload"],[44,8,39,6,"payload"],[44,15,39,13],[44,16,39,14,"add"],[44,19,39,6],[44,20,39,18,"push"],[44,24,39,6],[44,25,39,23,"currentAdd"],[44,35,39,6],[45,0,40,5],[45,7,30,4],[46,0,41,3],[48,0,43,2],[48,11,43,9,"payload"],[48,18,43,2],[49,0,44,1],[51,0,46,0],[51,11,46,9,"getOperation"],[51,23,46,0],[51,26,46,24],[52,0,47,2],[52,11,47,9,"_operations"],[52,22,47,20],[52,23,47,21],[52,32,47,20],[52,33,47,9],[52,34,47,32,"PNUpdateMembershipsOperation"],[52,62,47,2],[53,0,48,1],[55,0,50,0],[55,11,50,9,"validateParams"],[55,25,50,0],[55,26,50,24,"modules"],[55,33,50,0],[55,35,50,33,"incomingParams"],[55,49,50,0],[55,51,50,49],[56,0,51,2],[56,8,51,6,"userId"],[56,14,51,12],[56,17,51,15,"incomingParams"],[56,31,51,29],[56,32,51,30,"userId"],[56,38,51,2],[57,0,51,2],[57,8,52,6,"spaces"],[57,14,52,12],[57,17,52,15,"incomingParams"],[57,31,52,29],[57,32,52,30,"spaces"],[57,38,51,2],[58,0,53,2],[58,8,53,6],[58,9,53,7,"userId"],[58,15,53,2],[58,17,53,15],[58,24,53,22],[58,40,53,15],[59,0,54,2],[59,8,54,6],[59,9,54,7,"spaces"],[59,15,54,2],[59,17,54,15],[59,24,54,22],[59,40,54,15],[60,0,55,1],[62,0,57,0],[62,11,57,9,"getURL"],[62,17,57,0],[62,18,57,16,"modules"],[62,25,57,0],[62,27,57,25,"incomingParams"],[62,41,57,0],[62,43,57,41],[63,0,58,2],[63,8,58,6,"config"],[63,14,58,12],[63,17,58,15,"modules"],[63,24,58,22],[63,25,58,23,"config"],[63,31,58,2],[64,0,59,2],[64,11,59,9],[64,26,59,24,"concat"],[64,32,59,9],[64,33,59,31,"config"],[64,39,59,37],[64,40,59,38,"subscribeKey"],[64,52,59,9],[64,54,59,52],[64,63,59,9],[64,65,59,63,"concat"],[64,71,59,9],[64,72,59,70,"incomingParams"],[64,86,59,84],[64,87,59,85,"userId"],[64,93,59,9],[64,95,59,93],[64,104,59,9],[64,105,59,2],[65,0,60,1],[67,0,62,0],[67,11,62,9,"patchURL"],[67,19,62,0],[67,20,62,18,"modules"],[67,27,62,0],[67,29,62,27,"incomingParams"],[67,43,62,0],[67,45,62,43],[68,0,63,2],[68,8,63,6,"config"],[68,14,63,12],[68,17,63,15,"modules"],[68,24,63,22],[68,25,63,23,"config"],[68,31,63,2],[69,0,64,2],[69,11,64,9],[69,26,64,24,"concat"],[69,32,64,9],[69,33,64,31,"config"],[69,39,64,37],[69,40,64,38,"subscribeKey"],[69,52,64,9],[69,54,64,52],[69,63,64,9],[69,65,64,63,"concat"],[69,71,64,9],[69,72,64,70,"incomingParams"],[69,86,64,84],[69,87,64,85,"userId"],[69,93,64,9],[69,95,64,93],[69,104,64,9],[69,105,64,2],[70,0,65,1],[72,0,67,0],[72,11,67,9,"usePatch"],[72,19,67,0],[72,22,67,20],[73,0,68,2],[73,11,68,9],[73,15,68,2],[74,0,69,1],[76,0,71,0],[76,11,71,9,"getRequestTimeout"],[76,28,71,0],[76,29,71,27,"_ref"],[76,33,71,0],[76,35,71,33],[77,0,72,2],[77,8,72,6,"config"],[77,14,72,12],[77,17,72,15,"_ref"],[77,21,72,19],[77,22,72,20,"config"],[77,28,72,2],[78,0,73,2],[78,11,73,9,"config"],[78,17,73,15],[78,18,73,16,"getTransactionTimeout"],[78,39,73,9],[78,41,73,2],[79,0,74,1],[81,0,76,0],[81,11,76,9,"isAuthSupported"],[81,26,76,0],[81,29,76,27],[82,0,77,2],[82,11,77,9],[82,15,77,2],[83,0,78,1],[85,0,80,0],[85,11,80,9,"getAuthToken"],[85,23,80,0],[85,24,80,22,"modules"],[85,31,80,0],[85,33,80,31,"incomingParams"],[85,47,80,0],[85,49,80,47],[86,0,81,2],[86,8,81,6,"token"],[86,13,81,11],[86,16,81,14,"modules"],[86,23,81,21],[86,24,81,22,"tokenManager"],[86,36,81,14],[86,37,81,35,"getToken"],[86,45,81,14],[86,46,81,44],[86,52,81,14],[86,54,81,52,"incomingParams"],[86,68,81,66],[86,69,81,67,"userId"],[86,75,81,14],[86,80,81,78,"modules"],[86,87,81,85],[86,88,81,86,"tokenManager"],[86,100,81,78],[86,101,81,99,"getToken"],[86,109,81,78],[86,110,81,108],[86,116,81,78],[86,117,81,2],[87,0,82,2],[87,11,82,9,"token"],[87,16,82,2],[88,0,83,1],[90,0,85,0],[90,11,85,9,"prepareParams"],[90,24,85,0],[90,25,85,23,"modules"],[90,32,85,0],[90,34,85,32,"incomingParams"],[90,48,85,0],[90,50,85,48],[91,0,86,2],[91,8,86,6,"include"],[91,15,86,13],[91,18,86,16,"incomingParams"],[91,32,86,30],[91,33,86,31,"include"],[91,40,86,2],[92,0,86,2],[92,8,87,6,"limit"],[92,13,87,11],[92,16,87,14,"incomingParams"],[92,30,87,28],[92,31,87,29,"limit"],[92,36,86,2],[93,0,86,2],[93,8,88,6,"page"],[93,12,88,10],[93,15,88,13,"incomingParams"],[93,29,88,27],[93,30,88,28,"page"],[93,34,86,2],[94,0,89,2],[94,8,89,6,"params"],[94,14,89,12],[94,17,89,15],[94,19,89,2],[96,0,91,2],[96,8,91,6,"limit"],[96,13,91,2],[96,15,91,13],[97,0,92,4,"params"],[97,6,92,4,"params"],[97,12,92,10],[97,13,92,11,"limit"],[97,18,92,4],[97,21,92,19,"limit"],[97,26,92,4],[98,0,93,3],[100,0,95,2],[100,8,95,6,"include"],[100,15,95,2],[100,17,95,15],[101,0,96,4],[101,10,96,8,"includes"],[101,18,96,16],[101,21,96,19],[101,23,96,4],[103,0,98,4],[103,10,98,8,"include"],[103,17,98,15],[103,18,98,16,"totalCount"],[103,28,98,4],[103,30,98,28],[104,0,99,6,"params"],[104,8,99,6,"params"],[104,14,99,12],[104,15,99,13,"count"],[104,20,99,6],[104,23,99,21],[104,27,99,6],[105,0,100,5],[107,0,102,4],[107,10,102,8,"include"],[107,17,102,15],[107,18,102,16,"customFields"],[107,30,102,4],[107,32,102,30],[108,0,103,6,"includes"],[108,8,103,6,"includes"],[108,16,103,14],[108,17,103,15,"push"],[108,21,103,6],[108,22,103,20],[108,30,103,6],[109,0,104,5],[111,0,106,4],[111,10,106,8,"include"],[111,17,106,15],[111,18,106,16,"spaceFields"],[111,29,106,4],[111,31,106,29],[112,0,107,6,"includes"],[112,8,107,6,"includes"],[112,16,107,14],[112,17,107,15,"push"],[112,21,107,6],[112,22,107,20],[112,29,107,6],[113,0,108,5],[115,0,110,4],[115,10,110,8,"include"],[115,17,110,15],[115,18,110,16,"customSpaceFields"],[115,35,110,4],[115,37,110,35],[116,0,111,6,"includes"],[116,8,111,6,"includes"],[116,16,111,14],[116,17,111,15,"push"],[116,21,111,6],[116,22,111,20],[116,36,111,6],[117,0,112,5],[119,0,114,4],[119,10,114,8,"includesString"],[119,24,114,22],[119,27,114,25,"includes"],[119,35,114,33],[119,36,114,34,"join"],[119,40,114,25],[119,41,114,39],[119,44,114,25],[119,45,114,4],[121,0,116,4],[121,10,116,8,"includesString"],[121,24,116,22],[121,25,116,23,"length"],[121,31,116,8],[121,34,116,32],[121,35,116,4],[121,37,116,35],[122,0,117,6,"params"],[122,8,117,6,"params"],[122,14,117,12],[122,15,117,13,"include"],[122,22,117,6],[122,25,117,23,"includesString"],[122,39,117,6],[123,0,118,5],[124,0,119,3],[126,0,121,2],[126,8,121,6,"page"],[126,12,121,2],[126,14,121,12],[127,0,122,4],[127,10,122,8,"page"],[127,14,122,12],[127,15,122,13,"next"],[127,19,122,4],[127,21,122,19],[128,0,123,6,"params"],[128,8,123,6,"params"],[128,14,123,12],[128,15,123,13,"start"],[128,20,123,6],[128,23,123,21,"page"],[128,27,123,25],[128,28,123,26,"next"],[128,32,123,6],[129,0,124,5],[131,0,126,4],[131,10,126,8,"page"],[131,14,126,12],[131,15,126,13,"prev"],[131,19,126,4],[131,21,126,19],[132,0,127,6,"params"],[132,8,127,6,"params"],[132,14,127,12],[132,15,127,13,"end"],[132,18,127,6],[132,21,127,19,"page"],[132,25,127,23],[132,26,127,24,"prev"],[132,30,127,6],[133,0,128,5],[134,0,129,3],[136,0,131,2],[136,11,131,9,"params"],[136,17,131,2],[137,0,132,1],[139,0,134,0],[139,11,134,9,"patchPayload"],[139,23,134,0],[139,24,134,22,"modules"],[139,31,134,0],[139,33,134,31,"incomingParams"],[139,47,134,0],[139,49,134,47],[140,0,135,2],[140,11,135,9,"prepareMessagePayload"],[140,32,135,30],[140,33,135,31,"modules"],[140,40,135,30],[140,42,135,40,"incomingParams"],[140,56,135,30],[140,57,135,2],[141,0,136,1],[143,0,138,0],[143,11,138,9,"handleResponse"],[143,25,138,0],[143,26,138,24,"modules"],[143,33,138,0],[143,35,138,33,"membershipsResponse"],[143,54,138,0],[143,56,138,54],[144,0,139,2],[144,11,139,9,"membershipsResponse"],[144,30,139,2],[145,0,140,1]],"functionMap":{"names":["<global>","_interopRequireDefault","prepareMessagePayload","spaces.forEach$argument_0","getOperation","validateParams","getURL","patchURL","usePatch","getRequestTimeout","isAuthSupported","getAuthToken","prepareParams","patchPayload","handleResponse"],"mappings":"AAA;ACqB,iGD;AEE;mBCM;KDU;CFI;AIE;CJE;AKE;CLK;AME;CNG;AOE;CPG;AQE;CRE;ASE;CTG;AUE;CVE;AWE;CXG;AYE;CZ+C;AaE;CbE;AcE;CdE"}},"type":"js/module"}]}
{"dependencies":[{"name":"../components/config","data":{"isAsync":false}},{"name":"../flow_interfaces","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n\n  var _config = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[0], \"../components/config\"));\n\n  var _flow_interfaces = _$$_REQUIRE(_dependencyMap[1], \"../flow_interfaces\");\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var hashCode = function hashCode(payload) {\n    var hash = 0;\n    if (payload.length === 0) return hash;\n\n    for (var i = 0; i < payload.length; i += 1) {\n      var character = payload.charCodeAt(i);\n      hash = (hash << 5) - hash + character;\n      hash = hash & hash;\n    }\n\n    return hash;\n  };\n\n  var _default = function () {\n    function _default(_ref) {\n      var config = _ref.config;\n\n      _classCallCheck(this, _default);\n\n      _defineProperty(this, \"_config\", void 0);\n\n      _defineProperty(this, \"hashHistory\", void 0);\n\n      this.hashHistory = [];\n      this._config = config;\n    }\n\n    _createClass(_default, [{\n      key: \"getKey\",\n      value: function getKey(message) {\n        var hashedPayload = hashCode(JSON.stringify(message.payload)).toString();\n        var timetoken = message.publishMetaData.publishTimetoken;\n        return \"\".concat(timetoken, \"-\").concat(hashedPayload);\n      }\n    }, {\n      key: \"isDuplicate\",\n      value: function isDuplicate(message) {\n        return this.hashHistory.includes(this.getKey(message));\n      }\n    }, {\n      key: \"addEntry\",\n      value: function addEntry(message) {\n        if (this.hashHistory.length >= this._config.maximumCacheSize) {\n          this.hashHistory.shift();\n        }\n\n        this.hashHistory.push(this.getKey(message));\n      }\n    }, {\n      key: \"clearHistory\",\n      value: function clearHistory() {\n        this.hashHistory = [];\n      }\n    }]);\n\n    return _default;\n  }();\n\n  exports[\"default\"] = _default;\n  module.exports = exports.default;\n});","lineCount":116,"map":[[2,0,1,0],[4,0,3,0,"Object"],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,0],[4,24,3,22,"exports"],[4,31,3,0],[4,33,3,31],[4,45,3,0],[4,47,3,45],[5,0,4,2,"value"],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,0,3,45],[6,3,3,0],[7,0,6,0,"exports"],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8],[7,19,6,7],[7,20,6,0],[7,23,6,21],[7,28,6,26],[7,29,6,0],[9,0,8,0],[9,6,8,4,"_config"],[9,13,8,11],[9,16,8,14,"_interopRequireDefault"],[9,38,8,36],[9,39,8,37,"require"],[9,50,8,44],[9,93,8,36],[9,94,8,0],[11,0,10,0],[11,6,10,4,"_flow_interfaces"],[11,22,10,20],[11,25,10,23,"require"],[11,36,10,30],[11,77,10,0],[13,0,12,0],[13,11,12,9,"_interopRequireDefault"],[13,33,12,0],[13,34,12,32,"obj"],[13,37,12,0],[13,39,12,37],[14,0,12,39],[14,11,12,46,"obj"],[14,14,12,49],[14,18,12,53,"obj"],[14,21,12,56],[14,22,12,57,"__esModule"],[14,32,12,46],[14,35,12,70,"obj"],[14,38,12,46],[14,41,12,76],[15,0,12,78],[15,17,12,89,"obj"],[16,0,12,76],[16,5,12,39],[17,0,12,97],[19,0,14,0],[19,11,14,9,"_classCallCheck"],[19,26,14,0],[19,27,14,25,"instance"],[19,35,14,0],[19,37,14,35,"Constructor"],[19,48,14,0],[19,50,14,48],[20,0,14,50],[20,8,14,54],[20,10,14,56,"instance"],[20,18,14,64],[20,30,14,76,"Constructor"],[20,41,14,54],[20,42,14,50],[20,44,14,90],[21,0,14,92],[21,12,14,98],[21,16,14,102,"TypeError"],[21,25,14,98],[21,26,14,112],[21,61,14,98],[21,62,14,92],[22,0,14,151],[23,0,14,153],[25,0,16,0],[25,11,16,9,"_defineProperties"],[25,28,16,0],[25,29,16,27,"target"],[25,35,16,0],[25,37,16,35,"props"],[25,42,16,0],[25,44,16,42],[26,0,16,44],[26,9,16,49],[26,13,16,53,"i"],[26,14,16,54],[26,17,16,57],[26,18,16,44],[26,20,16,60,"i"],[26,21,16,61],[26,24,16,64,"props"],[26,29,16,69],[26,30,16,70,"length"],[26,36,16,44],[26,38,16,78,"i"],[26,39,16,79],[26,41,16,44],[26,43,16,83],[27,0,16,85],[27,10,16,89,"descriptor"],[27,20,16,99],[27,23,16,102,"props"],[27,28,16,107],[27,29,16,108,"i"],[27,30,16,107],[27,31,16,85],[28,0,16,112,"descriptor"],[28,6,16,112,"descriptor"],[28,16,16,122],[28,17,16,123,"enumerable"],[28,27,16,112],[28,30,16,136,"descriptor"],[28,40,16,146],[28,41,16,147,"enumerable"],[28,51,16,136],[28,55,16,161],[28,60,16,112],[29,0,16,168,"descriptor"],[29,6,16,168,"descriptor"],[29,16,16,178],[29,17,16,179,"configurable"],[29,29,16,168],[29,32,16,194],[29,36,16,168],[30,0,16,200],[30,10,16,204],[30,21,16,215,"descriptor"],[30,31,16,200],[30,33,16,227,"descriptor"],[30,43,16,237],[30,44,16,238,"writable"],[30,52,16,227],[30,55,16,249],[30,59,16,227],[31,0,16,255,"Object"],[31,6,16,255,"Object"],[31,12,16,261],[31,13,16,262,"defineProperty"],[31,27,16,255],[31,28,16,277,"target"],[31,34,16,255],[31,36,16,285,"descriptor"],[31,46,16,295],[31,47,16,296,"key"],[31,50,16,255],[31,52,16,301,"descriptor"],[31,62,16,255],[32,0,16,315],[33,0,16,317],[35,0,18,0],[35,11,18,9,"_createClass"],[35,23,18,0],[35,24,18,22,"Constructor"],[35,35,18,0],[35,37,18,35,"protoProps"],[35,47,18,0],[35,49,18,47,"staticProps"],[35,60,18,0],[35,62,18,60],[36,0,18,62],[36,8,18,66,"protoProps"],[36,18,18,62],[36,20,18,78,"_defineProperties"],[36,37,18,95],[36,38,18,96,"Constructor"],[36,49,18,107],[36,50,18,108,"prototype"],[36,59,18,95],[36,61,18,119,"protoProps"],[36,71,18,95],[36,72,18,78],[37,0,18,132],[37,8,18,136,"staticProps"],[37,19,18,132],[37,21,18,149,"_defineProperties"],[37,38,18,166],[37,39,18,167,"Constructor"],[37,50,18,166],[37,52,18,180,"staticProps"],[37,63,18,166],[37,64,18,149],[38,0,18,194],[38,11,18,201,"Constructor"],[38,22,18,194],[39,0,18,215],[41,0,20,0],[41,11,20,9,"_defineProperty"],[41,26,20,0],[41,27,20,25,"obj"],[41,30,20,0],[41,32,20,30,"key"],[41,35,20,0],[41,37,20,35,"value"],[41,42,20,0],[41,44,20,42],[42,0,20,44],[42,8,20,48,"key"],[42,11,20,51],[42,15,20,55,"obj"],[42,18,20,44],[42,20,20,60],[43,0,20,62,"Object"],[43,6,20,62,"Object"],[43,12,20,68],[43,13,20,69,"defineProperty"],[43,27,20,62],[43,28,20,84,"obj"],[43,31,20,62],[43,33,20,89,"key"],[43,36,20,62],[43,38,20,94],[44,0,20,96,"value"],[44,8,20,96,"value"],[44,13,20,101],[44,15,20,103,"value"],[44,20,20,94],[45,0,20,110,"enumerable"],[45,8,20,110,"enumerable"],[45,18,20,120],[45,20,20,122],[45,24,20,94],[46,0,20,128,"configurable"],[46,8,20,128,"configurable"],[46,20,20,140],[46,22,20,142],[46,26,20,94],[47,0,20,148,"writable"],[47,8,20,148,"writable"],[47,16,20,156],[47,18,20,158],[48,0,20,94],[48,7,20,62],[49,0,20,168],[49,5,20,44],[49,11,20,174],[50,0,20,176,"obj"],[50,6,20,176,"obj"],[50,9,20,179],[50,10,20,180,"key"],[50,13,20,179],[50,14,20,176],[50,17,20,187,"value"],[50,22,20,176],[51,0,20,195],[53,0,20,196],[53,11,20,203,"obj"],[53,14,20,196],[54,0,20,209],[56,0,22,0],[56,6,22,4,"hashCode"],[56,14,22,12],[56,17,22,15],[56,26,22,24,"hashCode"],[56,34,22,15],[56,35,22,33,"payload"],[56,42,22,15],[56,44,22,42],[57,0,23,2],[57,8,23,6,"hash"],[57,12,23,10],[57,15,23,13],[57,16,23,2],[58,0,24,2],[58,8,24,6,"payload"],[58,15,24,13],[58,16,24,14,"length"],[58,22,24,6],[58,27,24,25],[58,28,24,2],[58,30,24,28],[58,37,24,35,"hash"],[58,41,24,28],[60,0,26,2],[60,9,26,7],[60,13,26,11,"i"],[60,14,26,12],[60,17,26,15],[60,18,26,2],[60,20,26,18,"i"],[60,21,26,19],[60,24,26,22,"payload"],[60,31,26,29],[60,32,26,30,"length"],[60,38,26,2],[60,40,26,38,"i"],[60,41,26,39],[60,45,26,43],[60,46,26,2],[60,48,26,46],[61,0,27,4],[61,10,27,8,"character"],[61,19,27,17],[61,22,27,20,"payload"],[61,29,27,27],[61,30,27,28,"charCodeAt"],[61,40,27,20],[61,41,27,39,"i"],[61,42,27,20],[61,43,27,4],[62,0,28,4,"hash"],[62,6,28,4,"hash"],[62,10,28,8],[62,13,28,11],[62,14,28,12,"hash"],[62,18,28,16],[62,22,28,20],[62,23,28,11],[62,27,28,25,"hash"],[62,31,28,11],[62,34,28,32,"character"],[62,43,28,4],[63,0,29,4,"hash"],[63,6,29,4,"hash"],[63,10,29,8],[63,13,29,11,"hash"],[63,17,29,15],[63,20,29,18,"hash"],[63,24,29,4],[64,0,30,3],[66,0,32,2],[66,11,32,9,"hash"],[66,15,32,2],[67,0,33,1],[67,3,22,0],[69,0,35,0],[69,6,35,4,"_default"],[69,14,35,12],[69,17,35,15],[69,29,35,27],[70,0,36,2],[70,13,36,11,"_default"],[70,21,36,2],[70,22,36,20,"_ref"],[70,26,36,2],[70,28,36,26],[71,0,37,4],[71,10,37,8,"config"],[71,16,37,14],[71,19,37,17,"_ref"],[71,23,37,21],[71,24,37,22,"config"],[71,30,37,4],[73,0,39,4,"_classCallCheck"],[73,6,39,4,"_classCallCheck"],[73,21,39,19],[73,22,39,20],[73,26,39,19],[73,28,39,26,"_default"],[73,36,39,19],[73,37,39,4],[75,0,41,4,"_defineProperty"],[75,6,41,4,"_defineProperty"],[75,21,41,19],[75,22,41,20],[75,26,41,19],[75,28,41,26],[75,37,41,19],[75,39,41,37],[75,44,41,42],[75,45,41,19],[75,46,41,4],[77,0,43,4,"_defineProperty"],[77,6,43,4,"_defineProperty"],[77,21,43,19],[77,22,43,20],[77,26,43,19],[77,28,43,26],[77,41,43,19],[77,43,43,41],[77,48,43,46],[77,49,43,19],[77,50,43,4],[79,0,45,4],[79,11,45,9,"hashHistory"],[79,22,45,4],[79,25,45,23],[79,27,45,4],[80,0,46,4],[80,11,46,9,"_config"],[80,18,46,4],[80,21,46,19,"config"],[80,27,46,4],[81,0,47,3],[83,0,49,2,"_createClass"],[83,4,49,2,"_createClass"],[83,16,49,14],[83,17,49,15,"_default"],[83,25,49,14],[83,27,49,25],[83,28,49,26],[84,0,50,4,"key"],[84,6,50,4,"key"],[84,9,50,7],[84,11,50,9],[84,19,49,26],[85,0,51,4,"value"],[85,6,51,4,"value"],[85,11,51,9],[85,13,51,11],[85,22,51,20,"getKey"],[85,28,51,11],[85,29,51,27,"message"],[85,36,51,11],[85,38,51,36],[86,0,52,6],[86,12,52,10,"hashedPayload"],[86,25,52,23],[86,28,52,26,"hashCode"],[86,36,52,34],[86,37,52,35,"JSON"],[86,41,52,39],[86,42,52,40,"stringify"],[86,51,52,35],[86,52,52,50,"message"],[86,59,52,57],[86,60,52,58,"payload"],[86,67,52,35],[86,68,52,34],[86,69,52,26],[86,70,52,68,"toString"],[86,78,52,26],[86,80,52,6],[87,0,53,6],[87,12,53,10,"timetoken"],[87,21,53,19],[87,24,53,22,"message"],[87,31,53,29],[87,32,53,30,"publishMetaData"],[87,47,53,22],[87,48,53,46,"publishTimetoken"],[87,64,53,6],[88,0,54,6],[88,15,54,13],[88,18,54,16,"concat"],[88,24,54,13],[88,25,54,23,"timetoken"],[88,34,54,13],[88,36,54,34],[88,39,54,13],[88,41,54,39,"concat"],[88,47,54,13],[88,48,54,46,"hashedPayload"],[88,61,54,13],[88,62,54,6],[89,0,55,5],[90,0,49,26],[90,5,49,25],[90,7,56,5],[91,0,57,4,"key"],[91,6,57,4,"key"],[91,9,57,7],[91,11,57,9],[91,24,56,5],[92,0,58,4,"value"],[92,6,58,4,"value"],[92,11,58,9],[92,13,58,11],[92,22,58,20,"isDuplicate"],[92,33,58,11],[92,34,58,32,"message"],[92,41,58,11],[92,43,58,41],[93,0,59,6],[93,15,59,13],[93,20,59,18,"hashHistory"],[93,31,59,13],[93,32,59,30,"includes"],[93,40,59,13],[93,41,59,39],[93,46,59,44,"getKey"],[93,52,59,39],[93,53,59,51,"message"],[93,60,59,39],[93,61,59,13],[93,62,59,6],[94,0,60,5],[95,0,56,5],[95,5,49,25],[95,7,61,5],[96,0,62,4,"key"],[96,6,62,4,"key"],[96,9,62,7],[96,11,62,9],[96,21,61,5],[97,0,63,4,"value"],[97,6,63,4,"value"],[97,11,63,9],[97,13,63,11],[97,22,63,20,"addEntry"],[97,30,63,11],[97,31,63,29,"message"],[97,38,63,11],[97,40,63,38],[98,0,64,6],[98,12,64,10],[98,17,64,15,"hashHistory"],[98,28,64,10],[98,29,64,27,"length"],[98,35,64,10],[98,39,64,37],[98,44,64,42,"_config"],[98,51,64,37],[98,52,64,50,"maximumCacheSize"],[98,68,64,6],[98,70,64,68],[99,0,65,8],[99,15,65,13,"hashHistory"],[99,26,65,8],[99,27,65,25,"shift"],[99,32,65,8],[100,0,66,7],[102,0,68,6],[102,13,68,11,"hashHistory"],[102,24,68,6],[102,25,68,23,"push"],[102,29,68,6],[102,30,68,28],[102,35,68,33,"getKey"],[102,41,68,28],[102,42,68,40,"message"],[102,49,68,28],[102,50,68,6],[103,0,69,5],[104,0,61,5],[104,5,49,25],[104,7,70,5],[105,0,71,4,"key"],[105,6,71,4,"key"],[105,9,71,7],[105,11,71,9],[105,25,70,5],[106,0,72,4,"value"],[106,6,72,4,"value"],[106,11,72,9],[106,13,72,11],[106,22,72,20,"clearHistory"],[106,34,72,11],[106,37,72,35],[107,0,73,6],[107,13,73,11,"hashHistory"],[107,24,73,6],[107,27,73,25],[107,29,73,6],[108,0,74,5],[109,0,70,5],[109,5,49,25],[109,6,49,14],[109,7,49,2],[111,0,77,2],[111,11,77,9,"_default"],[111,19,77,2],[112,0,78,1],[112,3,35,15],[112,5,35,0],[114,0,80,0,"exports"],[114,2,80,0,"exports"],[114,9,80,7],[114,10,80,8],[114,19,80,7],[114,20,80,0],[114,23,80,21,"_default"],[114,31,80,0],[115,0,81,0,"module"],[115,2,81,0,"module"],[115,8,81,6],[115,9,81,7,"exports"],[115,16,81,0],[115,19,81,17,"exports"],[115,26,81,24],[115,27,81,25,"default"],[115,34,81,0]],"functionMap":{"names":["<global>","_interopRequireDefault","_classCallCheck","_defineProperties","_createClass","_defineProperty","hashCode","<anonymous>","_default","getKey","isDuplicate","addEntry","clearHistory"],"mappings":"AAA;ACW,iGD;AEE,yJF;AGE,6TH;AIE,uNJ;AKE,iNL;eME;CNW;eOE;ECC;GDW;WEI;KFI;WGG;KHE;WIG;KJM;WKG;KLE;CPI"}},"type":"js/module"}]}